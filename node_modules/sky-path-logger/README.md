# sky-path-logger

sky-path-logger is an adapted logger for SkypathLog schema.
It allows every sky-path service to execute numerous actions in a simple way.
sky-path-logger can write logs to unlimited number of logstashes and to the console terminal.

## Installation

First, make sure that your npm registry is connected to kishuriot Verdaccio (the only place where you can find the sky-path-logger).

Second, run the next command:
```bash
npm install sky-path-logger 
```
## Usage

### Example

```javascript
const logger = require('sky-path-logger');

logger.initializeLogger('info',{ host: 'dummy-host-1', port: 44444 });

logger.initializeServiceInformation({
    microserviceData:
    {
        systemName: 'SkyPath',
        serviceName: 'reception-matrix-connectivity-consumer',
        serviceVersion: '1.0',
        podId: 'OVERRIDE',
    },
    labels:
        ['@nitur Application user for linux-Tahalici', '@esb']
});


logger.initializeInstanceInformation({
    itemIds: {
        skypathMessageId: 'dafb2cd6-655a-4e7e-8fbf-5dcd84e20d4b'
    }
});

logger.logInfo('Hi, this is the firt log ever.', { payload: 'first payload' }, ['@first-item']);
```

This is a basic example logger using. The functions that were mentioned are a **must call functions** for using sky-path logger correctly.

### Functions
___
#### _initializeLogger (logLevel, ...logstashEndPoints)_

initializeLogger() function is the starting point for each program that uses the logger.

This function initializes the logger to it's default settings with the given argumants.

*logLevel* (type - string) represents the lower bound for each log that will be written with the logger.

For example: if the loglevel = info , then info is the filter level for comming logs - Only info an above logs will be written.

The list of log levels can be found in skypathLogSchema (more details latter) and below:

```json
[
    "fatal",
    "error",
    "warning",
    "info",
    "debug",
    "trace"
]
```
*logstashEndPoints* (type - object) represents an unlimited amount of logstash addresses that can be put in this argumant.

The form of each logstashEndPoint is ```{host: <value>, port: <value>}``` .
___
#### _addLogstashEndPoint (logstashEndPoint)_

addLogstashEndPoint() function adds logstash end point to the logger.

*logstashEndPoint* (type - object) represents a logstash address that can be put in this argumant.

The form of the logstashEndPoint is ```{host: <value>, port: <value>}``` .

___
#### _removeLogstashEndPoint (logstashEndPoint)_

removeLogstashEndPoint() function removes logstash end point from the logger.

*logstashEndPoint* (type - object) represents a logstash address that can be put in this argumant.

The form of the logstashEndPoint is ```{host: <value>, port: <value>}``` .

___
#### _addConsoleEndPoint ()_ 

addConsoleEndPoint() function adds the console terminal as an output to the logger.

___
#### _removeConsoleEndPoint ()_ 

removeConsoleEndPoint() function removes the console terminal as an output from the logger.

___
#### _initializeServiceInformation (objectServiceInformation)_ 

skypathLog schema has some fields that does not need to be configured more then once, because they are constant to the service level (as opposed to other fields that need to be configured for each message or for each log).

Those fields are called the Service Information - a service level fields for skypathLog schema.

initializeServiceInformation() function initializes the given Service Information to the logger.

This function is a *must call function*b and needs to be called only *once* in the service.

This aciton saves a large amount of argumants insertion for each log in future.

For each log that will be written, the logger unifies the log argumants, the service information and another object called instance information to a one valid message.

*objectServiceInformation* (type - object) represents the service information.

Example is available in defaultServiceInformation (more details later) and below:
```json
{
    "microserviceData": {
        "systemName": "example - dummy system - REQUIRED for Skypathlog schema",
        "serviceName": "example - dummy service - REQUIRED for Skypathlog schema",
        "serviceVersion": "example - 1.0 - REQUIRED for Skypathlog schema",
        "podId": "The pods id. automaticly created. OVERRIDES WHATEVER YOU WRITE HERE !!! - REQUIRED for Skypathlog schema"
    },
    "labels": [
        "Array of message tags - NOT REQUIRED for Skypathlog schema"
    ]
}
```

___
#### _initializeInstanceInformation (objectInstanceInformation)_ 

skypathLog schema has some fields that only need to be configured once, but need to be called for each arriving message because they are constant to the message level (as opposed to other fields that need to be configured for each log or service information that need to be configured and called once).

Those fields are called the Instance Information - a message level fields for skypathLog schema.

initializeInstanceInformation() function initializes the given Instance Information to the logger.

This function is a **must call function** and needs to be called *for each new message that arraives* to the service.

This aciton saves a large amount of argumants insertion for each log in future.

For each log that will be written, the logger unifies the log argumants, the instance information and the service information to a one valid message.

*objectInstanceInformation* (type - object) represents the instance information. **it can be empty or undefined argument**.

Example is available in defaultInstanceInformation (more details later) and below:
```json
{
    "itemIds": {
        "dummy_id": "example - dummy_id_value - itemIds is an object that keep all of the message's IDs"
    }
}
```

___
#### _logFatal (logString, item, tags)_

logFatal() function Logs a Fatal message to the logger endpoints (logstashes/console).

*logString* (type - string) Describes the log's purpose. REQUIERD

*item* (type - object) The main object of the log, the payload.

*tags* (type - array) Array of message tags (each tag is a String type).

___
#### _logError (logString, item, tags)_

logError() function Logs a Fatal message to the logger endpoints (logstashes/console).

*logString* (type - string) Describes the log's purpose. REQUIERD

*item* (type - object) The main object of the log, the payload.

*tags* (type - array) Array of message tags (each tag is a String type).

___
#### _logWarning (logString, item, tags)_

logWarning() function Logs a Fatal message to the logger endpoints (logstashes/console).

*logString* (type - string) Describes the log's purpose. REQUIERD

*item* (type - object) The main object of the log, the payload.

*tags* (type - array) Array of message tags (each tag is a String type).

___
#### _logInfo (logString, item, tags)_

logInfo() function Logs a Fatal message to the logger endpoints (logstashes/console).

*logString* (type - string) Describes the log's purpose. REQUIERD

*item* (type - object) The main object of the log, the payload.

*tags* (type - array) Array of message tags (each tag is a String type).

___
#### _logDebug (logString, item, tags)_

logDebug() function Logs a Fatal message to the logger endpoints (logstashes/console).

*logString* (type - string) Describes the log's purpose. REQUIERD

*item* (type - object) The main object of the log, the payload.

*tags* (type - array) Array of message tags (each tag is a String type).

___
#### _logTrace (logString, item, tags)_

logTrace() function Logs a Fatal message to the logger endpoints (logstashes/console).

*logString* (type - string) Describes the log's purpose. REQUIERD

*item* (type - object) The main object of the log, the payload.

*tags* (type - array) Array of message tags (each tag is a String type).

___

### Objects

#### _skypathLogSchema_

skypathLogSchema is the JSON schema of sky-path-logger. Can be used for understanding how to log a valid message to the logger.


#### _defaultServiceInformation_

defaultServiceInformation is the JSON default service information of sky-path-logger (for more info read initializeServiceInformation() function).

It Can be used for understanding how to write a service information for the logger.


#### _defaultInstanceInformation_

defaultInstanceInformation is the JSON default instance information of sky-path-logger (for more info read initializeInstanceInformation() function).

It Can be used for understanding how to write a instance information for the logger.

