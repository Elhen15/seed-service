{
    "$id": "SkyPathLog.schema.json",
    "title": "SkyPath and Engine Log",
	"version": "3.2",
	"type": "object",
	"definitions": {
		"AdditionalId": {
			"type": "object",
          	"description": "Additional Id that was previously generated for the currently handled item.",
			"properties": {
				"systemName":{
					"description": "The system's name where the ID was generated. e.g. - METEG_SAKNAI, GALAXY, SHOB-SAKNAI-ENGINE",
					"type": "string"                
                },
				"itemId": {
					"description": "The item ID as generated in the creating system.",
					"type": "string"
				},
              	"systemId": {
					"description": "A unique system code (see Octopus Monitoring Event Schema), used when reportings the ID to Octopus.",
					"type": "string",
					"minLength": 2
				}
			},
			"additionalProperties": false,
			"required": [
				"systemName",
              	"itemId"
			]
		}
	},
	"properties": {
		"timestamp": {
			"description": "The UTC time that the log record was created in. Format: yyyy-mm-ddThh:mm:ss.sssZ (ISO-8601)",
			"type": "string",
			"format": "date-time"
		},
		"logRecordId": {
			"description": "A unique ID for this log record (GUID/UUID).",
			"type": "string"
		},
		"logLevel": {
			"type": "string",
			"enum": [
				"fatal",
				"error",
				"warning",
				"info",
                "debug",
                "trace"
			]
		},
		"microserviceData": {
			"systemName": {
				"description": "System's name, such as: SkyPath, SaknaiShobEngine etc.",
				"type": "string"
			},
			"serviceName": {
				"description": "A unique name for each microservice",
				"type": "string"
			},
			"serviceVersion": {
				"description": "Microservice's application version",
				"type": "string"
			},
			"podId": {
				"description": "A unique ID for each pod of each service. ***ADD HERE HOW TO RESOLVE***",
				"type": "string"
			}
		},
		"logString": {
			"description": "String that describes the event that has been ocours",
			"type": "string"
		},
		"skypathMessageId": {
			"type": "string",
			"description": "A unique ID for the message in Sky Path (GUID/UUID). Not required for engine services."
		},
		"additionalIds": {
			"description": "Not required, but very recommended to keep the messages original IDs, or when creating an ID for medium, or when having to correlate a messageId with octupus. The content of this object is not validated by SkyPath and used for monitoring.",
			"type": "array",
			"items": {
				"$ref": "#/definitions/AdditionalId"
			}
		},
		"item": {
			"description": "Message's payload. Not required, but very recommended to log when recieving a new item, or creating a new one.",
			"type": "object"
		},
		"tags": {
			"description": "Message's tags. Used also for tagging a log with a relevant 'Octopus-eventKind'. Not required, but very recommended for filtering the logs from the same flow in Kibanna.",
			"type": "array",
			"items": {
				"type": "string"
			}
		}
	},
	"required": [
		"timestamp",
		"logRecordId",
		"logLevel",
		"microserviceData",
		"logString"
	]
}